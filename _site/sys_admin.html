<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sys admin</title>
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/style.css">
<!--    <link rel="stylesheet" href="./assets/css/minimum.css">-->
<!--    <script src="./assets/js/script.js" defer></script>-->

</head>
<body>
  <nav>
  <a href="./">home</a>
  <a href="./html">html</a>
  <a href="./css">css</a>
  <a href="./js">js</a>
  <a href="./programming">programming</a>
  <a href="./ide">ide</a>
  <a href="./sys_admin">sys admin</a>
  <a href="./espirit_de_corps">espirit de corps</a>
  <a href="./polis">πόλις</a>
  <a href="./oikos">οίκος</a>
  <a href="./glossa">γλώσσα</a>
</nav>

  <h1 id="cockpit">Cockpit</h1>

<p>Readings</p>
<ul>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">web console</a></li>
</ul>

<h1 id="shell">Shell</h1>
<p>Package Management System:</p>
<ul>
  <li>rpm.</li>
  <li>Manage software across multiple workstations through metadata: install, read, update and delete software; c.f. software installed using tarball which doesn’t have metadata information about the package contents, where the package came from etc</li>
  <li>A Linux distribution builds a binary from the source code, gathers the binaries with documentation, config files and scripts, signs the package, deploys it, ready for distribution via FTP or NFS</li>
  <li>
    <p>The rpm repository is maintained by RedHat, software in this repository is open-source as meets strict testing requirements for distribution.</p>
  </li>
  <li>yum.</li>
  <li>Builds on top of rpm utilities with a key focus: yum manages dependencies.</li>
  <li>dnf supersedes yum.</li>
  <li><code class="language-plaintext highlighter-rouge">/etc/yum.conf</code>, yum config file</li>
  <li><code class="language-plaintext highlighter-rouge">/etc/yum.repos.d/</code>, directory of config files specific to a package to find their repo</li>
  <li><code class="language-plaintext highlighter-rouge">/var/log/dnf.log</code>, supersedes <code class="language-plaintext highlighter-rouge">/var/log/yum.log</code></li>
  <li><code class="language-plaintext highlighter-rouge">/var/cache/dnf/</code> - cached package metadata location, supersedes <code class="language-plaintext highlighter-rouge">/var/cache/yum/</code></li>
  <li><code class="language-plaintext highlighter-rouge">/var/lib/rpm/</code> - after installation, package metadata is stored in a database here; to query this database, use <code class="language-plaintext highlighter-rouge">rpm</code>.</li>
  <li>Package metadata downloaded manages dependencies, pre-installation scripts, installation procedure and post-installation scripts</li>
  <li>Use <code class="language-plaintext highlighter-rouge">dnf</code> followed by a <strong>subcommand</strong> and argument to run operations</li>
</ul>

<p>Searching for packages:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">dnf search {KEYWORD}</code> finds packages related to keyword which can be the name or description of the package</li>
  <li><code class="language-plaintext highlighter-rouge">dnf provides {KEYWORD}</code> finds packages related to keyword which can be part of a name, description, command, config file etc. included in the package</li>
  <li><code class="language-plaintext highlighter-rouge">dnf info {PACKAGE}</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf list {PACKAGE}</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf list available</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf list installed</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf list all</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf deplist {PACKAGE}</code> finds dependencies of a package</li>
</ul>

<p>Installing packages:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">dnf install {PACKAGE}</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf reinstall {PACKAGE}</code> for repairing an installation</li>
</ul>

<p>Removing packages:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">dnf erase {PACKAGE}</code> removes only the selected package and ignores dependencies</li>
  <li><code class="language-plaintext highlighter-rouge">dnf remove {PACKAGE}</code> removes the package and its dependencies</li>
  <li><code class="language-plaintext highlighter-rouge">dnf history undo {ID}</code> undo an entire transaction based on history ID
    <ul>
      <li><code class="language-plaintext highlighter-rouge">dnf history</code></li>
      <li><code class="language-plaintext highlighter-rouge">dnf history info {ID}</code></li>
    </ul>
  </li>
</ul>

<p>Updating packages:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">dnf check-update</code> checks if new updates are available</li>
  <li><code class="language-plaintext highlighter-rouge">dnf update {PACKAGE}</code> updates a single package</li>
  <li><code class="language-plaintext highlighter-rouge">dnf update</code> updates all packages</li>
</ul>

<p>Group packages:</p>
<ul>
  <li>Groups of packages are bundled together to provide an environment / suite of tools e.g. postgresql, scientific support</li>
  <li><code class="language-plaintext highlighter-rouge">dnf grouplist</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf groupinfo {PACKAGE_GROUP}</code></li>
  <li><code class="language-plaintext highlighter-rouge">dnf groupinstall {PACKAGE_GROUP}</code></li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">dnf groupremove {PACKAGE_GROUP}</code></p>
  </li>
  <li><code class="language-plaintext highlighter-rouge">rpm -qi firefox</code></li>
</ul>

<h1 id="shell-1">Shell</h1>
<ul>
  <li><code class="language-plaintext highlighter-rouge"># cat /var/log/messages | less</code></li>
  <li><code class="language-plaintext highlighter-rouge"># dmesg | less</code></li>
  <li><code class="language-plaintext highlighter-rouge"># journalctl</code></li>
</ul>

<p>One of the many entries in <code class="language-plaintext highlighter-rouge">journalctl</code> is the logging of users running commands on a terminal, including the timestamp, what privilege and in which directory.</p>

<p>Readings</p>
<ul>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/introduction-to-systemd_configuring-basic-system-settings">systemd</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_troubleshooting-problems-using-log-files_configuring-basic-system-settings">log files, syslog</a></li>
</ul>

<h1 id="shell-2">Shell</h1>
<p>Commands following the <code class="language-plaintext highlighter-rouge">$</code> symbol is a shell prompt for a normal user.  Commands following the <code class="language-plaintext highlighter-rouge">#</code> symbol are run by a superuser.</p>

<ul>
  <li>Run <code class="language-plaintext highlighter-rouge">$ systemctl list-units --type service</code> for a listing of active services.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">$ systemctl status firewalld.service</code> to check the state of the firewall.</li>
  <li>Run <code class="language-plaintext highlighter-rouge"># systemctl enable --now firewalld</code> to start the firewall.  <code class="language-plaintext highlighter-rouge">enable</code> indicates the service <code class="language-plaintext highlighter-rouge">firewalld</code> should be started automatically after a reboot.  <code class="language-plaintext highlighter-rouge">--now</code> flag is equivalent to <code class="language-plaintext highlighter-rouge"># systemctl start firewalld</code></li>
  <li>The full operational name for <code class="language-plaintext highlighter-rouge">firewalld</code> is <code class="language-plaintext highlighter-rouge">firewalld.service</code>.</li>
  <li><code class="language-plaintext highlighter-rouge"># systemctl start name.service</code>, <code class="language-plaintext highlighter-rouge"># systemctl stop name.service</code>, <code class="language-plaintext highlighter-rouge"># systemctl restart name.service</code></li>
  <li><code class="language-plaintext highlighter-rouge"># systemctl reload name.service</code>, reload configuration without stopping execution of the service</li>
  <li><code class="language-plaintext highlighter-rouge"># systemctl enable name.service</code> and <code class="language-plaintext highlighter-rouge"># systemctl disable name.service</code></li>
</ul>

<p>Readings</p>
<ul>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-system-services-with-systemctl_configuring-basic-system-settings">firewalld, systemctl</a></li>
</ul>

<h1 id="shell-3">Shell</h1>
<p>Shell environment variables are declared with the following syntax: <code class="language-plaintext highlighter-rouge">KEYWORD="value"</code>, the shell variable uses capital letters, with no spaces between the equal operator and its surrounding operands.  To fetch the value of variable, use the dollar sign: <code class="language-plaintext highlighter-rouge">$KEYWORD</code>.</p>

<p>Set up personal scripts to group tasks together.</p>
<ul>
  <li>In the <code class="language-plaintext highlighter-rouge">~/.bashrc</code> file, include your home directory script files in the shell execute path: <code class="language-plaintext highlighter-rouge">export PATH="$HOME/scripts/bin:$PATH</code>.</li>
  <li>Create a new file <code class="language-plaintext highlighter-rouge">ide.sh</code>, placing it in the directory <code class="language-plaintext highlighter-rouge">~/scripts/bin</code>.</li>
  <li>Make the file executable via <code class="language-plaintext highlighter-rouge">chmod +x ide.sh</code> and including the shebang declaration at the top of the file: <code class="language-plaintext highlighter-rouge">#!/bin/bash</code>.</li>
  <li>After commands are included in the <code class="language-plaintext highlighter-rouge">~/scripts/bin/ide.sh</code> file, the command can be run by typing <code class="language-plaintext highlighter-rouge">ide.sh</code> in the command line</li>
  <li>All commands executed as part of the script occur in a spawned subshell.</li>
  <li>The spawned subshell resolves all the actions before returning control to the parent subshell.  This means that any context actions which place the shell in different directories are not carried over to the parent shell on control being returned.</li>
  <li>An opportunity to operate within the subshell can occur if the subshell creates a listener process like a server.  Running <code class="language-plaintext highlighter-rouge">Ctrl+C</code> to cancel the server will instead cancel the subshell thereby killing any processes that the subshell has created.</li>
  <li>The scripts must create processes that move standard output and standard errors into <code class="language-plaintext highlighter-rouge">/dev/null</code> otherwise the parent shell will log the information; and also run the process in the background.</li>
  <li>Place <code class="language-plaintext highlighter-rouge">\</code> at the end of a line to continue the statement to the next line.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">reset</span><span class="o">=</span><span class="s1">'\033[0m'</span>
<span class="nv">green</span><span class="o">=</span><span class="s1">'\033[1;32m'</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$green</span><span class="s2"> ide setup, executed</span><span class="nv">$reset</span><span class="s2">"</span>
 
sh /opt/pycharm-2023.2/bin/pycharm.sh &amp;&gt;/dev/null &amp;

firefox <span class="nt">--new-tab</span> <span class="nt">-url</span> <span class="s2">"http://127.0.0.1:4000/"</span> <span class="se">\</span>
        <span class="nt">--new-tab</span> <span class="nt">-url</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/PycharmProjects/theodinproject2023/restaurant/dist/index.html"</span> <span class="se">\</span>
        &amp;&gt;/dev/null &amp;
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="shell-4">Shell</h1>
<ul>
  <li><code class="language-plaintext highlighter-rouge">info coreutils</code> to open documentation on GNU utilities; more comprehensive than <code class="language-plaintext highlighter-rouge">man</code> for the topics discussed</li>
  <li><code class="language-plaintext highlighter-rouge">tldr [COMMAND]</code> outputs quick reference documentation on a command; useful for getting an initial understanding</li>
  <li><code class="language-plaintext highlighter-rouge">tldr --update</code> to update the cache; updated to improve documentation so fetching as needed</li>
  <li><code class="language-plaintext highlighter-rouge">sh /opt/pycharm-2023.2/bin/pycharm/.sh &amp;&gt;/dev/null &amp;</code> start the pycharm binary, redirects standard output and standard error into <code class="language-plaintext highlighter-rouge">/dev/null</code> and moves the application into the background to resume terminal usage</li>
  <li><code class="language-plaintext highlighter-rouge">man bash /REDIRECTION</code> and <code class="language-plaintext highlighter-rouge">man bash /Redirecting Standard Output and Standard Error</code> to learn more about <code class="language-plaintext highlighter-rouge">&amp;&gt;</code></li>
</ul>

<h1 id="shell-5">Shell</h1>
<ul>
  <li><code class="language-plaintext highlighter-rouge">~/.bashrc</code> file</li>
  <li>Set up aliases:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">CURRENT_PROJECT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/PycharmProjects/theodinproject2023/restaurant/"</span>

<span class="nb">alias </span><span class="nv">ll</span><span class="o">=</span><span class="s2">"ls -al --block-size=kB"</span>
<span class="nb">alias rm</span><span class="o">=</span><span class="s2">"rm -i"</span>
<span class="nb">alias </span><span class="nv">current</span><span class="o">=</span><span class="s2">"cd </span><span class="nv">$CURRENT_PROJECT</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Many sys_admin commands happen in startup and shutdown scripts within <code class="language-plaintext highlighter-rouge">etc/rc.d</code>.  Caution here.</li>
</ul>

<p>Host Information:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">uname -s</code> shows operating system type.</li>
  <li><code class="language-plaintext highlighter-rouge">uname -m</code> shows the architecture, equivalent to <code class="language-plaintext highlighter-rouge">arch</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">uname -a</code> for a verbose description.</li>
</ul>

<p>Job Control:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">top -b</code> lists current processes using up CPU, outputs in text format to be parsed or accessed by a script.</li>
  <li><code class="language-plaintext highlighter-rouge">ps aux</code> lists current processes by PID, output can be piped to <code class="language-plaintext highlighter-rouge">grep</code> or <code class="language-plaintext highlighter-rouge">sed</code></li>
  <li><code class="language-plaintext highlighter-rouge">pstree</code> lists current processes in a tree format, very useful for understanding how the processes were spawned; <code class="language-plaintext highlighter-rouge">-p</code> option shows PIDs and process names, more verbose.</li>
  <li><code class="language-plaintext highlighter-rouge">cron</code> is the root version of <code class="language-plaintext highlighter-rouge">at</code>; the daemon executing scheduled entries on<code class="language-plaintext highlighter-rouge">/etc/crontab</code>.  See <code class="language-plaintext highlighter-rouge">man 4 crontabs</code></li>
</ul>

<p>Readings:</p>
<ul>
  <li><a href="https://tldp.org/LDP/abs/abs-guide.pdf">the linux documentation project: advanced bash scripting</a></li>
  <li><a href="https://tldp.org/LDP/abs/html/part4.html">abs: commands</a></li>
  <li><a href="https://tldp.org/LDP/abs/html/system.html">abs: sys_admin commands</a></li>
  <li><a href="https://www.frozentux.net/iptables-tutorial/iptables-tutorial.html">iptables</a></li>
</ul>

<h1 id="keyboard-input">Keyboard Input</h1>

<ul>
  <li>Settings &gt; Keyboard &gt; Input Sources &gt; + &gt; Greek (polytonic).</li>
  <li><code class="language-plaintext highlighter-rouge">Super Key + Spacebar</code> to switch between inputs.</li>
</ul>

</body>
</html>
